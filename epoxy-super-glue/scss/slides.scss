/*-- scss:defaults --*/
// FIXME: remove unneeded style
@import url('https://fonts.googleapis.com/css2?family=Fira+Mono&family=IBM+Plex+Mono&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Red+Hat+Mono&family=Source+Code+Pro:ital,wght@0,400;0,600;1,400;1,600&display=swap');


$blue: #125AF3;
$purple: #785EF0;
$pink: #DC267F;
$orange: #FE6100;
$yellow: #F5A700;
$red: #FB4A4A;
$mint: #35B685;

$colors: (
  "blue": $blue,
  "pink": $pink,
  "purple": $purple,
  "orange": $orange,
  "yellow": $yellow,
  "red": $red,
  "mint": $mint,
);

@each $name, $color in $colors {
  .text-#{$name} {
    color: var(--#{$name}, $color);
  }
  .bg-#{$name} {
    background-color: var(--#{$name}, $color);
    .epoxy-ex-output & {
      color: white;
      padding: 2.5px 10px;
    }
  }
}

:root {
  --blue: #{$blue};
  --purple: #{$purple};
  --pink: #{$pink};
  --orange: #{$orange};
  --yellow: #{$yellow};
  --red: #{$red};
  --mint: #{$mint};
}

$font-system-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;

$font-family-sans-serif: $font-system-stack;
// $font-family-monospace: "Red Hat Mono", "Source Code Pro", monospace;
// $font-family-monospace: "IBM Plex Mono", "Source Code Pro", monospace;
$font-family-monospace: "Fira Mono", "Source Code Pro", monospace;

$presentation-font-size-root: clamp(25px, 2.5vw, 65px);

// colors
$dark-slides: true;
$body-bg: #fff !default;
$body-color: #000 !default;
$link-color: #000 !default;
$presentation-heading-color: #000 !default;

// $body-bg: #000 !default;
// $body-color: #fff !default;
// $link-color: #fff !default;
// $presentation-heading-color: #fff !default;

$selection-bg: $pink !default;


/*-- scss:rules --*/
:is(h1, h2, h3):empty {
  display: none;
}

.reveal {
  a {
    line-height: 1.3em;
  }

  .slide-menu-button > a {
    opacity: 0.5;
    color: #808080;
  }

  .content-center pre code {
    max-height: unset;
  }

  div.sourceCode {
    border: none;
    background-color: white;
  }

  pre {
    font-size: 1em;
  }

  [data-auto-animate] {
    div.sourceCode,
    pre code {
      overflow: visible;
    }
  }

  code span.st { color: #1f883d; } /* String */
}

.reveal .slide {
  max-height: calc(1080px * 1.25);
  max-width: calc(1920px * 1.25);
  // aspect-ratio: 16 / 9;
  // outline: 2px solid red;
  container-type: inline-size;

  &,
  * {
    box-sizing: border-box;
  }

  .content {
    position: relative;
    height: 100%;
    width: 100%;
  }

  .content-center {
    @extend .content;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  &.bg-blue {
    background-color: $blue;
    color: white;
  }

  &.bg-purple {
    background-color: $purple;
    color: white;
  }

  &.bg-pink {
    background-color: $pink;
    color: white;
  }

  &.bg-orange {
    background-color: $orange;
    color: white;
  }

  &.bg-yellow {
    background-color: $yellow;
    color: white;
  }

  &.bg-red {
    background-color: $red;
    color: white;
  }

  &.bg-gradient-deep-blue {
    background-image:
      radial-gradient(
        140% 110% at 50% 5% in oklab,
        oklch(0% 0.26 188) 0%, oklch(17% 0.26 206) 98%
      );
  }

  &.bold-lower-left .content {
    display: flex !important;
    flex-direction: row;

    :first-child {
      font-size: min(10vw, 30vh);
      font-weight: bold;
      line-height: 0.9;
      align-self: end;
      justify-self: start;
    }
  }

  &.auto-layout {
    display: flex;
    flex-direction: column;
  }

  .code-chunk {
    font-family: $font-family-monospace;
    background-color: var(--gray-1);
    margin-bottom: var(--size-6);
  }

  .quote-sans {
    min-width: 88vw;
    font-size: clamp(3rem, 10vw, 15rem);
    font-family: $font-family-sans-serif;
  }

  .quote-code {
    min-width: 90vw;
    font-family: $font-family-monospace;
    font-size: clamp(2rem, 6vw, 7rem);
    line-height: 1.6;
  }

  .offscreen-up {
    position: absolute;
    top: -100vh;
    left: var(--offscreen-left, 3rem);
    width: 100%;
    overflow: hidden;
  }

  .hex-content {
    --hex-size: 70%;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    color: white;

    code {
      color: #ffdba5;
      font-family: monospace;
    }
  }

  .hex-content > :last-child {
    min-width: 55%;
    font-size: clamp(1rem, 4vw, var(--size-10));
    transform: perspective(800px) rotateY(-12deg);

    li + li { padding-top: 2rem; }
  }

  .epoxy-ex-output {
    font-size: clamp(3rem, 3vw, 10rem);
    p {
      line-height: 1.66;
    }
  }

  &.glue-to-epoxy {
    font-size: clamp(1rem, 3vw, 4rem);
  }
}

[hidden] {
  .swipe-down-animated {
    animation: unset !important;
  }
}

@keyframes swipe-down {
  from { height: 0; }
  to { height: 100%; }
}

.inline-examples {
  code {
    color: #555;
  }

  code:nth-child(2) {
    color: #777;
  }

  .fragment > p > code:last-child {
    font-family: $font-system-stack;
    letter-spacing: 2px;
  }

  code > .fragment {
    display: inline-block;
    width: max-content;
  }

  code > .fragment:not(.visible) {
    width: 0;
  }

  @for $i from 1 through length($colors) {
    $pair: nth($colors, $i);
    $color: nth($pair, 2);

    > .content-center > .w-66 > .fragment:nth-child(#{$i}) {
      .fragment, code:last-child {
        color: $color;
      }
    }
  }
}

[data-fragment] {
  [data-show-from], [data-show-on] {
    display: none;
  }
}

@for $idx from 0 to 15 {
  [data-fragment="#{$idx}"] {
    [data-show-on="#{$idx}"] {
      display: inline-block;
    }
  }

  @for $idx2 from $idx to 15 {
    [data-fragment="#{$idx2}"] [data-show-from="#{$idx}"] {
      display: inline-block;
    }
    [data-fragment="#{$idx2}"] [data-fade-from="#{$idx}"] {
      opacity: 0.6 !important;
    }
  }
}

/*
[data-auto-animate][hidden] [data-id="var"] {
  opacity: 0;
}

[data-auto-animate="running"] [data-id="var"] {
  opacity: 1 !important;
  transition-delay: .66s !important;
  transition-property: opacity !important;
}
*/
