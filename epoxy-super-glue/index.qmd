---
title: "epoxy"
subtitle: "super glue for data-driven reports and Shiny apps"

author:
  - Garrick Aden-Buie
  - "<code>posit::conf(2023)</code>"

format:
  revealjs:
    theme:
      - scss/slides.scss
      - scss/utilities.scss
      - scss/typewriter.scss
    width: 100%
    height: 100%
    margin: 0

engine: knitr

editor:
  render-on-save: true
---

```{r setup, include=FALSE}
source("R/utils.R")
```

## {.center}

::: {.d-flex .flex-column .align-items-center}
::: quote-sans
<div>Infant day care costs</div>
<div>up to [$15,417]{.text-orange} a year</div>
:::
:::

::: notes
As a parent, this is more than just a number...

But as a data scientist... I can't help but think about how that number got there.
:::

## {.center}

<!-- type out quote up to number -->

::: {.d-flex .flex-column .align-items-center}
::: quote-sans
<div class="d-if"><div class="d-ib typewriter" data-id="preamble" style="--steps:22;--blinks:0">Infant day care costs</div></div><br>
<div class="d-if"><div class="d-ib typewriter" data-id="before" style="--steps:6;--delay:1680ms;--blinks:50">up to&nbsp;</div></div>
:::
:::


## {.center}

<!-- copy paste the number -->

::: {.d-flex .flex-column .align-items-center}
::: quote-sans
<div class="d-ib" data-id="preamble">Infant day care costs</div> \
<div class="d-ib" data-id="before">up to</div>
<div class="d-if" style="width:min-content"><div class="d-ib text-orange typewriter" data-id="var" style="--duration:500ms;--steps:1;--blinks:2">$15,417</div></div>
<div class="d-if"><div class="d-ib typewriter" data-id="after" style="--delay:2s;--steps:5;--blinks:3">a year</div></div>
:::
:::

## {auto-animate="true"}

<!-- now in an Rmd -->

:::: {.content .d-flex .flex-column .justify-content-center}

::: {.code-chunk .offscreen-up style="font-size: 4vw" data-id="code-chunk"}
&#x60;&#x60;&#x60;{r} \
max_med_cost <- \
&nbsp;&nbsp;childcare_costs |> \
&nbsp;&nbsp;[# group and summarize... |>]{.text-muted} \
&nbsp;&nbsp;filter(cost = max(cost)) |> \
&nbsp;&nbsp;pull(cost) \ \
&#x60;&#x60;&#x60;
:::

::: {.d-flex .flex-column .align-items-center}
::: {.quote-code}
<div class="d-if"><div class="d-ib typewriter" data-id="preamble" style="--steps:22;--blinks:0">Infant day care costs</div></div><br>
<div class="d-if"><div class="d-ib typewriter" data-id="before" style="--steps:6;--delay:1680ms;--blinks:50">up to&nbsp;</div></div>
<div>&nbsp;<!-- placeholder for last line --></div>
:::
:::
::::

## {.p-10 auto-animate="true"}

<!-- reveal code chunk -->

:::: {.content .d-flex .flex-column .justify-content-center}

::: {.code-chunk .mb-6 style="font-size: 4vw;" data-id="code-chunk"}
&#x60;&#x60;&#x60;{r} \
max_med_cost <- \
&nbsp;&nbsp;childcare_costs |> \
&nbsp;&nbsp;[# group and summarize... |>]{.text-muted} \
&nbsp;&nbsp;filter(cost = max(cost)) |> \
&nbsp;&nbsp;pull(cost) \ \
&#x60;&#x60;&#x60;
:::

::: {.quote-code style="font-size: 4vw; line-height: 1.2;"}
<div>Infant day care costs</div>
<div class="d-if"><div class="typewriter" style="--steps:1;--duration:10ms;--blinks:50">up to&nbsp;</div></div>
<div>&nbsp;<!-- placeholder for last line --></div>
:::
::::



## {.p-10 auto-animate="true" auto-animate-unmatched="false"}

<!-- highlight variable and type it out -->

:::: {.content .d-flex .flex-column .justify-content-center}

::: {.ff-mono .mb-6 style="font-size: 4vw; background:var(--gray-1);"}
&#x60;&#x60;&#x60;{r} \
[max_med_cost]{.text-orange .fw-6} <- \
&nbsp;&nbsp;childcare_costs |> \
&nbsp;&nbsp;[# group and summarize... |>]{.text-muted} \
&nbsp;&nbsp;filter(cost = max(cost)) |> \
&nbsp;&nbsp;pull(cost) \ \
&#x60;&#x60;&#x60;
:::

::: {.quote-code style="font-size: 4vw; line-height: 1.2;" data-id="quote"}
<div>Infant day care costs</div>
<div>up to
<div class="d-if"><div class="d-ib typewriter" style="--delay:1s;--steps:17;--blinks:0;">[&#x60;r [max_med_cost]{.text-orange}&#x60;]{.text-blue}</div></div>
</div>
<div><div class="d-if"><div class="d-ib typewriter" style="--delay:2360ms;--steps:6;--blinks:2;">a year.</div></div></div>
:::
::::

## {.p-10 auto-animate="true"}

<!-- promise and magic of rmd -->

:::: {.content .d-flex .flex-column .justify-content-center}

::: {.quote-code .text-muted data-id="quote"}
<div>Infant day care costs</div>
<div>up to [&#x60;r [max_med_cost]{.text-orange}&#x60;]{.text-blue}</div>
<div>a year.</div>
:::
::::

::: notes
This is the promise and magic of R Markdown.

* prose in same document as code
* reproducible writing
* update data or analysis and re-render
* output changes!

When rendered, max median cost is woven into the prose...
:::

## {.p-10 transition="fade"}

<!-- rendered version of the document, number isn't great -->

:::: {.content .d-flex .flex-column .justify-content-center}

```{r}
#| include: false
max_med_cost <- 15416.96
```

::: {.quote-sans style="color: var(--gray-7);"}
<div>Infant day care costs</div>
<div>up to [`r max_med_cost`]{.text-orange .d-ib data-id="quote-var"}</div>
<div>a year.</div>
:::
::::

## {.p-10}

::: content-center

```{r}
#| echo: false
fake_chunk(
  class = "fs-4vw",
  engine = "epoxy",
  "Infant day care costs
up to {.dollar max_med_cost}
a year."
)
```

* From Rmd text, wrap the text in an epoxy chunk
* replace back-tick r with braces
* Insert the `.dollar` formatter
* render...

:::

## {.p-10}

::: content-center
::: quote-sans
<div>Infant day care costs</div>
<div>up to [$15,417]{.text-orange} a year</div>
:::
:::

<!-- here

## {.center .p-10 auto-animate="true" auto-animate-unmatched="false"}

::: {.ff-mono style="font-size: 4vw; background-color:#f4f4fa;" data-id="chunk"}
&#x60;&#x60;&#x60;{r} \
max_med_cost <- \
&nbsp;&nbsp;childcare_costs |> \
&nbsp;&nbsp;[# group and summarize... |>]{.text-muted} \
&nbsp;&nbsp;filter(cost = max(cost)) |> \
&nbsp;&nbsp;pull(cost) \ \
&#x60;&#x60;&#x60;
:::

::: {.quote-code style="font-size: 4vw; line-height: 1.2;" data-id="quote"}
<div>Infant day care costs</div>
<div>up to [&#x60;r max_med_cost&#x60;]{.text-blue}</div>
<div>a year.</div>
:::


## {.center .p-10 auto-animate="true"}

::: {.ff-mono style="font-size: 4vw; background-color:#f4f4fa;"}
&#x60;&#x60;&#x60;{r} \
[max_med_cost]{.text-orange .d-ib data-id="quote-var"} <- \
&nbsp;&nbsp;childcare_costs |> \
&nbsp;&nbsp;[# group and summarize... |>]{.text-muted} \
&nbsp;&nbsp;filter(cost = max(cost)) |> \
&nbsp;&nbsp;pull(cost) \
&#x60;&#x60;&#x60;
:::

::: {.quote-code style="font-size: 4vw; line-height: 1.2;"}
<div>Infant day care costs</div>
<div>up to [&#x60;r [max_med_cost]{.text-orange}&#x60;]{.text-blue}</div>
<div>a year.</div>
:::

## {.center .p-10 auto-animate="true"}

::: {.quote-code .text-muted}
<div>Infant day care costs</div>
<div>up to [&#x60;r [max_med_cost]{.text-orange .d-ib data-id="quote-var"}&#x60;]{.text-blue}</div>
<div>a year.</div>
:::


-->
